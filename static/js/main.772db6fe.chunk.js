(this["webpackJsonphapin-messaging-app"]=this["webpackJsonphapin-messaging-app"]||[]).push([[0],{18:function(e,t,s){},25:function(e,t,s){},41:function(e,t,s){},47:function(e,t,s){},5:function(e,t,s){},80:function(e,t,s){},81:function(e,t,s){},82:function(e,t,s){},83:function(e,t,s){},84:function(e,t,s){"use strict";s.r(t);var n=s(2),i=s.n(n),a=s(42),c=s.n(a),r=(s(47),s(5),s(4)),l=s(1),o=s(3),u=(s(25),s(0)),d=function(e){var t=e.inputType,s=e.onChanges,n=e.value;return Object(u.jsxs)("div",{className:"inputBlock",children:[Object(u.jsx)("label",{className:"inputLabel",htmlFor:t,children:t}),Object(u.jsx)("input",{className:"inputField",type:t,name:t,id:t,value:n,onChange:s})]})},m=s(24),j=Object(m.io)("https://socially-distanced-server.herokuapp.com/"),b=function(e){var t=e.user,s=e.route,n=e.errorMessage,i=e.setRoute,a=e.setUser,c=e.setErrorMessage,r=e.setIsSignedIn,o=e.onRouteChange,m=e.setCurrentMessage,j=(e.pastMessages,e.setPrivateMessages),b=(e.setCurrentPublicMessage,e.setPrivatePublicMessage,e.setConversation),g=e.setPastMessages,O=e.setPastPublicMessages,f=(e.setFilteredMessages,e.filteredMessages,e.loadData),h=e.password,p=e.setPassword,x=t.name,v=t.email,N=function(e){switch(e.target.id){case"Name":a((function(t){return Object(l.a)(Object(l.a)({},t),{},{name:e.target.value})})),console.log(t);break;case"Email":a((function(t){return Object(l.a)(Object(l.a)({},t),{},{email:e.target.value})}));break;case"Password":p(e.target.value);break;default:console.log(e.target.value)}};return Object(u.jsx)("div",{children:Object(u.jsx)("div",{className:"container",children:Object(u.jsx)("article",{className:"formWindow",children:Object(u.jsxs)("div",{className:"formcontainer",children:["Register"===s?Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{className:"legend",children:"Register"}),Object(u.jsx)("div",{className:"error",children:n}),Object(u.jsx)(d,{inputType:"Name",value:x,onChanges:N}),Object(u.jsx)(d,{inputType:"Email",value:v,onChanges:N}),Object(u.jsx)(d,{inputType:"Password",value:h,onChanges:N})]}):Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{className:"legend",children:"Sign In"}),Object(u.jsx)("div",{className:"error",children:n}),Object(u.jsx)(d,{inputType:"Email",value:v,onChanges:N}),Object(u.jsx)(d,{inputType:"Password",value:h,onChanges:N})]}),Object(u.jsx)("div",{className:"legend",children:Object(u.jsx)("button",{type:"submit",className:"button",onClick:function(){var e=t.email.toUpperCase();"Sign In"===s?function(e){fetch("https://socially-distanced-server.herokuapp.com/signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:h})}).then((function(e){return e.json()})).then((function(s){s.email===e?(a(s),console.log("login",t,s),i("home"),r(!0),c(""),p(""),m((function(t){return Object(l.a)(Object(l.a)({},t),{},{name:s.name,email:e})})),b({me:s.email,you:""})):(c("Invalid Login Information"),a({name:"",email:"",friends:[],requests:[],pendingrequests:[]}),p(""))})).catch((function(e){return console.log(e)})),f("friendmessageload",JSON.stringify({email:e,friends:t.friends}),g),f("publicmessageload",JSON.stringify({email:e,friends:t.friends}),O),f("privatemessageload",JSON.stringify({email:e,friends:t.friends}),j)}(e):function(e){/\S+@\S+\.\S+/.test(v)&&h.length>=8?(fetch("https://socially-distanced-server.herokuapp.com/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,email:e,password:h,friends:t.friends})}).then((function(e){return e.json()})).then((function(e){"TAKEN"===e?c("That email address is already registered."):(a(e),i("home"),r(!0),c(""),p(""),m((function(t){return Object(l.a)(Object(l.a)({},t),{},{name:e.name,email:e.email})})))})).catch((function(e){return console.log(e)})),f("publicmessageload",JSON.stringify({email:e,friends:t.friends}),O)):h.length<8?c("Password must be 8 characters long"):c("Enter a valid email address")}(e)},children:"Submit"})}),Object(u.jsx)("div",{className:"legend",children:"Sign In"===s?Object(u.jsx)("p",{onClick:function(){return o("Register")},className:"loginLink",children:"Register"}):Object(u.jsx)("p",{onClick:function(){return o("Sign In")},className:"loginLink",children:"Sign In"})})]})})})})},g=(s(80),s.p+"static/media/hamburger.745580e9.png"),O=(s.p,s(11)),f=(s(18),function(e){var t=e.friend,s=e.converse,n=e.route,i=e.unFriend,a=e.pendOrReq;return Object(u.jsx)("div",{className:"radioButton",children:"mail"===n?Object(u.jsxs)("li",{children:[Object(u.jsx)("input",{type:"radio",name:"friend",id:t,onClick:function(){return s(t)}}),Object(u.jsx)("label",{htmlFor:t,children:t})]}):Object(u.jsxs)("li",{children:[Object(u.jsx)("input",{type:"radio",name:"friend",id:t,onClick:function(){return s(t)}}),Object(u.jsx)("label",{htmlFor:t,children:t}),Object(u.jsx)("button",{className:"friendButton",onClick:function(){return i(t,a)},children:"X"})]})})}),h=function(e){var t=e.friend,s=e.rejectFriend,n=e.acceptFriend,i=e.pendOrReq;return Object(u.jsx)("div",{className:"radioButton",children:Object(u.jsxs)("li",{children:[Object(u.jsx)("input",{type:"radio",name:"friend",id:t}),Object(u.jsx)("label",{htmlFor:t,children:t}),Object(u.jsx)("button",{className:"friendButton",onClick:function(){return n(t)},children:"Accept"}),Object(u.jsx)("button",{className:"friendButton",onClick:function(){return s(t,i)},children:"X"})]})})},p=function(e){var t=e.friend,s=e.rejectFriend,n=e.pendOrReq;return Object(u.jsx)("div",{className:"radioButton",children:Object(u.jsxs)("li",{children:[Object(u.jsx)("input",{type:"radio",name:"friend",id:t}),Object(u.jsx)("label",{htmlFor:t,children:t}),Object(u.jsx)("button",{className:"friendButton",onClick:function(){return s(t,n)},children:"X"})]})})},x=(s.p,function(e){var t=e.user,s=(e.setUser,e.setPrivateMessage,e.route,e.setRoute,e.setConversation,e.addFriend),i=(e.onRouteChange,e.converse),a=Object(n.useState)(Object(O.a)(new Set(null===t||void 0===t?void 0:t.requests))),c=Object(o.a)(a,2),r=c[0],l=c[1],d=Object(n.useState)(Object(O.a)(new Set(null===t||void 0===t?void 0:t.pendingrequests))),m=Object(o.a)(d,2),j=m[0],b=m[1];Object(n.useEffect)((function(){l(Object(O.a)(new Set(t.requests))),b(Object(O.a)(new Set(t.pendingrequests)))}),[t]);var g=function(e){console.log(e,t.email),fetch("https://socially-distanced-server.herokuapp.com/unfriend",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email,friend:e.toUpperCase()})}).then((function(e){return e.json()})).then((function(e){})).catch((function(e){return console.log(e)}))},x=function(e){fetch("https://socially-distanced-server.herokuapp.com/acceptfriend",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email,friend:e})}).then((function(e){return e.json()})).then((function(e){})).catch((function(e){return console.log(e)}))},v=function(e,s){"Request"===s?fetch("https://socially-distanced-server.herokuapp.com/reject",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email,friend:e,option:"request"})}).then((function(e){return e.json()})).then((function(e){})).catch((function(e){return console.log(e)})):fetch("https://socially-distanced-server.herokuapp.com/reject",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,friend:t.email,option:"pending"})}).then((function(e){return e.json()})).then((function(e){})).catch((function(e){return console.log(e)}))},N=t.friends;return Object(u.jsx)("div",{className:"maincomment",children:Object(u.jsx)("div",{className:"commentsection",children:Object(u.jsx)("div",{className:"",children:Object(u.jsx)("div",{className:"",children:Object(u.jsxs)("div",{className:"",children:[Object(u.jsxs)("div",{children:[N?Object(u.jsx)("div",{children:Object(u.jsx)("ul",{className:"scroll",children:N.map((function(e){return Object(u.jsx)(f,{converse:i,friend:e,unFriend:g})}))})}):Object(u.jsx)(u.Fragment,{}),Object(u.jsx)("button",{className:"addFriend",onClick:function(){return s("No Names")},children:"Add Friend"})]}),r&&r[0]?Object(u.jsxs)("div",{className:"scroll",children:[Object(u.jsx)("div",{className:"friendtitlebox",children:Object(u.jsx)("p",{className:"requesttitle",children:"Request"})}),Object(u.jsx)("ul",{className:"scroll",children:r.map((function(e){return Object(u.jsx)(h,{friend:e,rejectFriend:v,pendOrReq:"Request",acceptFriend:x})}))})]}):Object(u.jsx)(u.Fragment,{}),j&&j[0]?Object(u.jsxs)("div",{className:"scroll",children:[Object(u.jsx)("div",{className:"friendtitlebox",children:Object(u.jsx)("p",{className:"pendingtitle",children:"Pending Request"})}),Object(u.jsx)("ul",{className:"scroll",children:j.map((function(e){return Object(u.jsx)(p,{friend:e,rejectFriend:v,pendOrReq:"Pending"})}))})]}):Object(u.jsx)(u.Fragment,{})]})})})})})}),v=function(e){var t,s=e.onRouteChange,i=e.isSignedIn,a=e.route,c=e.user,r=(e.setUser,e.setRoute,e.setPrivateMessage,e.setConversation,e.conversation,e.addFriend,e.publicStatus,e.setPublicStatus,e.changePublicStatus),l=(e.privateMessages,Object(n.useState)("Hidden")),d=Object(o.a)(l,2),m=d[0],j=d[1],b=function(){j("Hidden"===m?"":"Hidden")};return i?Object(u.jsxs)("div",{className:"navroot",children:[Object(u.jsx)("div",{className:"title",children:"Halpin Messaging App"}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{className:"hideButton",onClick:b,children:Object(u.jsx)("img",{src:g,alt:"=",width:"15rem"})})}),Object(u.jsxs)("div",{className:"mainNav"+m,children:[Object(u.jsx)("button",{className:"wideButton",onClick:b,children:"Close"}),Object(u.jsxs)("div",{className:"groupContainer",children:[Object(u.jsx)("p",{className:"groupChat",children:"Group Chats"}),Object(u.jsxs)("div",{className:"navButtonContainer ",children:[Object(u.jsx)("p",{onClick:function(){return r("home",!0)},className:"navButtons home"+a,children:"Public"}),Object(u.jsx)("p",{className:"navButtons friend"+a,onClick:function(){return r("friend",!1)},children:"Friends"})]})]}),Object(u.jsx)("div",{children:Object(u.jsx)("p",{className:"navButtons mail"+a,onClick:function(){return s("mail")},children:"Private Message"})}),Object(u.jsx)("div",{className:"",children:Object(u.jsxs)("p",{className:"navButtons friends"+a,onClick:function(){return s("friends")},children:["Contacts",(null===c||void 0===c||null===(t=c.requests)||void 0===t?void 0:t.length)?Object(u.jsx)("span",{className:"requests",children:c.requests.length}):Object(u.jsx)(u.Fragment,{})]})}),Object(u.jsx)("nav",{className:"",children:Object(u.jsx)("p",{onClick:function(){return s("Sign In")},className:"navButtons ",children:"Sign Out"})})]})]}):Object(u.jsx)("div",{})},N=(s(41),s(81),function(e){return Object(u.jsx)("div",{children:Object(u.jsx)("img",{className:"picture",alt:"picture",src:e.source})})}),C=s.p+"static/media/like.1fe2cbbc.png",k=s.p+"static/media/liked.82a0b8ca.png",S=function(e){var t=e.route,s=e.text,n=e.email,i=e.time,a=e.i,c=e.deletePost,r=e.deleteMail,l=e.addLike,o=e.currentUser,d=e.currentId,m=e.filteredMessages,j=e.background,b=e.publicStatus,g=(e.pastPublicMessages,e.addFriend),O=e.likes;return Object(u.jsx)("div",{className:"box",children:Object(u.jsxs)("div",{className:"smallbox",children:[Object(u.jsx)("div",{className:"messageArea "+j,children:Object(u.jsx)("div",{className:"text",children:Object(u.jsx)("div",{className:"textmessage",children:s.includes("#img#")?Object(u.jsx)(N,{source:s.substr(5,s.length-1)}):s})})}),Object(u.jsxs)("div",{className:"user "+j,children:[Object(u.jsx)("p",{onClick:function(){return g(n)},children:n.toUpperCase().substr(0,n.indexOf("@"))}),Object(u.jsx)("p",{className:"date",children:i.substr(0,16)})]}),Object(u.jsxs)("div",{className:"likes ",children:["home"===t||"friend"===t?Object(u.jsx)("button",{className:"likeButton",onClick:function(){return l(a,d)},children:O&&JSON.stringify(O).includes(o)?Object(u.jsx)("img",{src:k,alt:"Unlike",width:"20rem"}):Object(u.jsx)("img",{src:C,alt:"like",width:"20rem"})}):Object(u.jsx)(u.Fragment,{}),Object(u.jsxs)("div",{className:"likedelete",children:[("home"===t||"friend"===t)&&O?Object(u.jsx)("div",{className:"liketext",children:O.length>=4?"".concat(O.length," Likes"):O.length>1?O.length>2?JSON.parse(O[0]).name+", "+JSON.parse(O[1]).name+", and "+JSON.parse(O[2]).name+" like this post":JSON.parse(O[0]).name+" and "+JSON.parse(O[1]).name+" like this post":O.length?JSON.parse(O).name+" likes this post":""}):Object(u.jsx)(u.Fragment,{}),Object(u.jsx)("div",{className:"deleteContainer",children:"home"===t||"friend"===t?Object(u.jsx)("div",{children:m[a].email===o?Object(u.jsx)("div",{className:"deleteBackground",children:Object(u.jsx)("button",{className:"deleteButton",id:a,onClick:function(){return c(a,b,d)},children:"x"})}):Object(u.jsx)(u.Fragment,{})}):Object(u.jsx)("div",{className:"deleteBackground",children:Object(u.jsx)("button",{className:"deleteButton",id:a,onClick:function(){return r(d)},children:"X"})})})]})]})]})})},M=function(e){var t=e.user,s=e.currentMessage,i=e.pastMessages,a=(e.setPastMessages,e.setCurrentMessage),c=e.currentPublicMessage,r=e.pastPublicMessages,d=(e.setPastPublicMessages,e.setCurrentPublicMessage),m=e.deletePost,b=e.route,g=e.addFriend,f=(e.conversation,e.setFilteredMessages),h=e.filteredMessages,p=e.publicStatus,x=(e.setPublicStatus,Object(n.useState)({picture:"textareahide",message:"textareahide",button:"",submit:"textareahide",position:" middle"})),v=Object(o.a)(x,2),N=v[0],C=v[1],k="",M="";Object(n.useEffect)((function(){s.time;""!==s.message&&(j.emit("friendmessage",{name:t.name,email:t.email.toUpperCase(),message:s.message,time:"currentTime",likes:[]}),a((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:""})})))}),[s.time]),Object(n.useEffect)((function(){var e=c.time;""!==c.message&&(j.emit("publicmessage",{name:t.name,email:t.email.toUpperCase(),message:c.message,time:e,likes:[]}),d((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:""})})))}),[c.time]),Object(n.useEffect)((function(){t.friends&&(f((function(){return i.filter((function(e){return e.email===t.email||t.friends.includes(e.email)}))})),console.log(h))}),[t.friends,i]);var y=function(e){!e||""===c.message&&""===s.message||(p?d((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:"#img#"+c.message})})):a((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:"#img#"+s.message})}))),p?d((function(e){return Object(l.a)(Object(l.a)({},e),{},{time:Date().toLocaleString()})})):a((function(e){return Object(l.a)(Object(l.a)({},e),{},{time:Date().toLocaleString()})})),C({picture:"textareahide",message:"textareahide",button:"",submit:"textareahide",position:" middle"})},P=function(e){p?d((function(t){return Object(l.a)(Object(l.a)({},t),{},{message:e.target.value})})):a((function(t){return Object(l.a)(Object(l.a)({},t),{},{message:e.target.value})}))},F=function(e){return console.log(e,t.email),JSON.parse(e).email!==t.email.toUpperCase()},U=function(e,s){var n=!0;if(p){var i=Object(O.a)(r);i[e].likes&&(n=i[e].likes.every(F)),console.log(n),i[e].likes,n?j.emit("likes",{name:t.name,email:t.email,id:s,database:"publicmessages"}):j.emit("dislike",{name:t.name,email:t.email,id:s,database:"publicmessages"})}else if(!p){var a=Object(O.a)(h);a[e].likes&&(n=a[e].likes.every(F)),!a[e].likes||n?j.emit("likes",{name:t.name,email:t.email,id:s,database:"friendmessage"}):j.emit("dislike",{name:t.name,email:t.email,id:s,database:"friendmessage"})}},q=function(e){C(e?{picture:"",message:"textareahide",button:"textareahide",submit:"",position:" right"}:{picture:"textareahide",message:"",button:"textareahide",submit:"",position:" right"})},B=function(){C({picture:"textareahide",message:"textareahide",button:"",submit:"textareahide",position:" middle"}),p?d((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:""})})):a((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:""})}))};return Object(u.jsx)("div",{className:"maincomment",children:p?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"inputbox",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{id:"pic",className:"textareapic public "+N.picture,cols:"40",rows:"6",onChange:P,placeholder:"Enter Picture URL",value:c.message,autoFocus:!0}),Object(u.jsx)("textarea",{id:"msg",className:"textarea public "+N.message,onChange:P,value:c.message,autoFocus:!0})]})}),Object(u.jsxs)("div",{className:"commentsection",children:[Object(u.jsxs)("div",{className:"inputbox",children:[Object(u.jsx)("label",{className:"msg "+N.submit,onClick:function(){return y(""===N.picture)},children:"Submit"}),Object(u.jsx)("label",{className:"msg "+N.submit,onClick:B,children:"Back"}),Object(u.jsx)("label",{htmlFor:"msg",className:"msg "+N.button,onClick:function(){return q(!1)},children:"Message"}),Object(u.jsx)("label",{htmlFor:"pic",className:"msg "+N.button,onClick:function(){return q(!0)},children:"Picture"})]}),Object(u.jsx)("div",{className:"bigbox",children:r.map((function(e,s){var n=r.length-1-s,i=r[n].id;return Object(u.jsx)("div",{children:Object(u.jsx)(S,{filteredMessages:r,currentUser:t.email,email:r[n].email,text:r[n].message,time:r[n].time,i:n,currentId:i,deletePost:m,route:b,addLike:U,likes:r[n].likes,publicStatus:p,addFriend:g})},s)}))})]})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"inputbox",children:[Object(u.jsx)("input",{id:"friendpic",className:"textareapic friend "+N.picture,onChange:P,placeholder:"Enter Picture URL",value:s.message}),Object(u.jsx)("textarea",{id:"friendmsg",className:"textarea friend "+N.message,onChange:P,value:s.message})]}),Object(u.jsxs)("div",{className:"commentsection",children:[Object(u.jsxs)("div",{className:"inputbox",children:[Object(u.jsx)("label",{htmlFor:"friendmsg",className:"msg "+N.button,onClick:function(){return q(!1)},children:"Message"}),Object(u.jsx)("label",{htmlFor:"friendpic",className:"msg "+N.button,onClick:function(){return q(!0)},children:"Picture"}),Object(u.jsx)("label",{className:"msg "+N.submit,onClick:function(){return y(""===N.picture)},children:"Submit"}),Object(u.jsx)("label",{className:"msg "+N.submit,onClick:B,children:"Back"})]}),Object(u.jsx)("div",{className:"bigbox",children:h.map((function(e,s){var n=h.length-1-s,i=h[n].id;return k=h[n].email.toUpperCase()===t.email.toUpperCase()?"sender":"recipient",M=h[n].email.toUpperCase()===t.email.toUpperCase()?"senderbackground":"",Object(u.jsx)("div",{className:k,children:Object(u.jsx)(S,{filteredMessages:h,currentUser:t.email,email:h[n].email,text:h[n].message,time:h[n].time,i:n,currentId:i,deletePost:m,route:b,addLike:U,likes:h[n].likes,publicStatus:p,addFriend:g,background:M})},s)}))})]})]})})},y=(s(82),function(e){var t=e.privateMessage,s=e.setPrivateMessage,i=e.privateMessages,a=(e.setPrivateMessages,e.user),c=(e.deletePost,e.conversation),r=e.setConversation,d=e.converse,m=e.route,b=Object(n.useState)({picture:"textareahide",message:"textareahide",button:"",submit:"textareahide"}),g=Object(o.a)(b,2),O=g[0],h=g[1],p="",x="";Object(n.useEffect)((function(){""!==t.message&&j.emit("privatemessage",{name:a.name,senderemail:a.email,recipientemail:c.you,message:t.message,time:"currentTime"}),s((function(e){return Object(l.a)(Object(l.a)({},e),{},{name:"",message:"",time:""})}))}),[t.time]);var v=function(e){s((function(t){return Object(l.a)(Object(l.a)({},t),{},{message:e.target.value})}))},N=function(e){j.emit("deletemail",{id:e,database:"privatemessage"})},C=function(e){h(e?{picture:"",message:"textareahide",button:"textareahide",submit:""}:{picture:"textareahide",message:"",button:"textareahide",submit:""})};return Object(u.jsx)("div",{className:"mailbox",children:c.you?Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("input",{id:"picture",className:"mailtextarea "+O.picture,cols:"40",rows:"6",onChange:v,placeholder:"Enter Picture URL",value:t.message}),Object(u.jsx)("textarea",{id:"mail",className:"mailtextarea "+O.message,cols:"40",rows:"6",onChange:v,value:t.message}),Object(u.jsxs)("div",{className:"mailButtons",children:[Object(u.jsx)("label",{htmlFor:"mail",className:"buttons "+O.button,onClick:function(){return C(!1)},children:"Message"}),Object(u.jsx)("label",{htmlFor:"picture",className:"buttons "+O.button,onClick:function(){return C(!0)},children:"Picture"}),Object(u.jsx)("label",{className:"buttons "+O.submit,onClick:function(){return""===O.picture&&""!==t.message&&s((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:"#img#"+t.message})})),s((function(e){return Object(l.a)(Object(l.a)({},e),{},{time:Date().toLocaleString()})})),void h({picture:"textareahide",message:"textareahide",button:"",submit:"textareahide"})},children:"Submit"}),Object(u.jsx)("label",{className:"buttons "+O.submit,onClick:function(){h({picture:"textareahide",message:"textareahide",button:"",submit:"textareahide"}),s((function(e){return Object(l.a)(Object(l.a)({},e),{},{message:""})}))},children:"Back"})]}),Object(u.jsxs)("div",{className:"privateMessage",children:[Object(u.jsx)("button",{className:"backButton",onClick:function(){r((function(e){return Object(l.a)(Object(l.a)({},e),{},{you:""})}))},children:"<"}),Object(u.jsx)("p",{className:"contactName",children:c.you})]})]}),Object(u.jsx)("div",{className:"messages",children:i.map((function(e,t){var s=i.length-1-t,n=i[s].id;if(i[s].recipientemail.toUpperCase()===c.you&&i[s].senderemail.toUpperCase()===a.email||i[s].senderemail.toUpperCase()===c.you&&i[s].recipientemail.toUpperCase()===a.email)return p=i[s].senderemail.toUpperCase()===a.email.toUpperCase()?"sender":"recipient",x=i[s].senderemail.toUpperCase()===a.email.toUpperCase()?"senderbackground":"",Object(u.jsx)("div",{className:p,children:Object(u.jsx)(S,{email:i[s].senderemail,text:i[s].message,time:i[s].time,i:t,deleteMail:N,currentId:n,background:x})})}))})]}):Object(u.jsxs)("div",{className:"nocontactContainer",children:[Object(u.jsx)("p",{className:"contactName",children:"Select a contact to message"}),Object(u.jsx)("ul",{className:"contactScroll",children:a.friends.map((function(e){return Object(u.jsx)("div",{children:Object(u.jsx)(f,{converse:d,friend:e,route:m})})}))})]})})});s(83);var P=function(){var e,t=Object(n.useState)({name:"",email:"",friends:[],request:[],pendingrequests:[]}),s=Object(o.a)(t,2),i=s[0],a=s[1],c=Object(n.useState)(""),d=Object(o.a)(c,2),m=d[0],g=d[1],O=Object(n.useState)("Sign In"),f=Object(o.a)(O,2),h=f[0],p=f[1],N=Object(n.useState)(!1),C=Object(o.a)(N,2),k=C[0],S=C[1],P=Object(n.useState)(""),F=Object(o.a)(P,2),U=F[0],q=F[1],B=Object(n.useState)([]),R=Object(o.a)(B,2),w=R[0],E=R[1],I=Object(n.useState)({id:"",name:"",email:"",message:"",time:"",likes:[]}),J=Object(o.a)(I,2),T=J[0],L=J[1],D=Object(n.useState)([]),A=Object(o.a)(D,2),H=A[0],X=A[1],G=Object(n.useState)({id:"",name:"",email:"",message:"",time:"",likes:[]}),K=Object(o.a)(G,2),W=K[0],z=K[1],Q=Object(n.useState)([]),V=Object(o.a)(Q,2),Y=V[0],Z=V[1],$=Object(n.useState)({id:"",name:"",senderemail:"",recipientemail:"",message:"",time:""}),_=Object(o.a)($,2),ee=_[0],te=_[1],se=Object(n.useState)({me:"",you:""}),ne=Object(o.a)(se,2),ie=ne[0],ae=ne[1],ce=Object(n.useState)({}),re=Object(o.a)(ce,2),le=re[0],oe=re[1],ue=Object(n.useState)(!0),de=Object(o.a)(ue,2),me=de[0],je=de[1],be=function(e){return e===i.email};Object(n.useEffect)((function(){j.on("friendrequest",(function(e){return be(e[0].email)&&(a(e[0]),console.log("request",i)),function(){j.off("friendrequest")}}))}),[]),Object(n.useEffect)((function(){return j.on("unfriend",(function(e){console.log(e,i),be(e[0].email)&&a(e[0])})),function(){j.off("unfriend")}}),[]),Object(n.useEffect)((function(){return j.on("reject",(function(e){console.log(e[0],i),be(e[0].email)&&(console.log("setting user",e[0]),a(e[0]))})),function(){j.off("reject")}}),[]),Object(n.useEffect)((function(){return j.on("acceptfriend",(function(e){console.log("accept",e,i),be(e[0].email)&&a(e[0])})),function(){j.off("acceptfriend")}}),[]),j.on("privatemessage",(function(e){Z(e)})),j.on("publicmessage",(function(e){X(e)})),j.on("friendmessage",(function(e){E(e)})),j.on("publiclikes",(function(e){X(e)})),j.on("friendlikes",(function(e){E(e)})),j.on("publicdislike",(function(e){X(e)})),j.on("frienddislike",(function(e){E(e)})),j.on("publicdeletemessage",(function(e){X(e)})),j.on("frienddeletemessage",(function(e){E(e)})),j.on("deletemail",(function(e){Z(e)})),Object(n.useEffect)((function(){i.friends&&oe((function(){return w.filter((function(e){return e.email===i.email||i.friends.includes(e.email)}))}))}),[]);var ge=function(e){"home"===e||"mail"===e||"friends"===e||"friend"===e?S(!0):(p("Sign In"),S(!1),a({name:"",email:"",friends:[],requests:[],pendingrequests:[]}),L({id:"",name:"",email:"",message:"",time:"",likes:[]}),te({id:"",name:"",senderemail:"",recipientemail:"",message:"",time:""}),ae({me:"",you:""}),je(!0),q(""),g("")),p(e)},Oe=function(e,t,s){fetch("https://socially-distanced-server.herokuapp.com/".concat(e),{method:"post",headers:{"Content-Type":"application/json"},body:t}).then((function(e){return e.json()})).then((function(e){s(e)})).catch((function(e){return console.log(e)}))},fe=function(e,t,s){t?j.emit("deletemessage",{id:s,database:"publicmessages"}):j.emit("deletemessage",{id:s,database:"friendmessage"})},he=function(e){console.log("friend",i),"No Names"===e&&(e=prompt("Enter the email address of your friend ")),console.log(i.email),e&&(i.friends&&i.friends.includes(e)&&i.pendingrequests.includes(e)&&i.request.includes(e)||fetch("https://socially-distanced-server.herokuapp.com/friendrequest",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.email,newFriend:e.toUpperCase()})}).then((function(e){return e.json()})).then((function(t){alert("Friend request sent to ".concat(e.toUpperCase(),".")),console.log(t)})).catch((function(e){return console.log(e)})))},pe=function(e){ae((function(t){return Object(l.a)(Object(l.a)({},t),{},{you:e})})),te((function(t){return Object(l.a)(Object(l.a)({},t),{},{recipientEmail:e})})),p("mail")};return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(v,(e={onRouteChange:ge,isSignedIn:k,route:h,user:i,setUser:a},Object(r.a)(e,"route",h),Object(r.a)(e,"setRoute",p),Object(r.a)(e,"setPrivateMessage",te),Object(r.a)(e,"setConversation",ae),Object(r.a)(e,"conversation",ie),Object(r.a)(e,"addFriend",he),Object(r.a)(e,"publicStatus",me),Object(r.a)(e,"setPublicStatus",je),Object(r.a)(e,"changePublicStatus",(function(e,t){je(t),ge(e)})),Object(r.a)(e,"privateMessages",Y),e)),k?"home"===h||"friend"===h?Object(u.jsx)("div",{className:"main",children:Object(u.jsx)("div",{className:"mainMessage",children:Object(u.jsx)(M,{user:i,loadData:Oe,route:h,deletePost:fe,currentMessage:T,setCurrentMessage:L,pastMessages:w,setPastMessages:E,currentPublicMessage:W,setCurrentPublicMessage:z,pastPublicMessages:H,setPastPublicMessages:X,addFriend:he,conversation:ie,setFilteredMessages:oe,filteredMessages:le,publicStatus:me,setPublicStatus:je})})}):"mail"===h?Object(u.jsx)("div",{className:"main",children:Object(u.jsx)("div",{className:"mainMessage",children:Object(u.jsx)(y,{user:i,privateMessage:ee,setPrivateMessage:te,privateMessages:Y,setPrivateMessages:Z,deletePost:fe,conversation:ie,loadData:Oe,setConversation:ae,converse:pe,route:h})})}):Object(u.jsx)(x,{user:i,setUser:a,route:h,setRoute:p,setPrivateMessage:te,setConversation:ae,addFriend:he,onRouteChange:ge,converse:pe}):Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(b,{user:i,route:h,errorMessage:U,setUser:a,setRoute:p,setErrorMessage:q,setIsSignedIn:S,onRouteChange:ge,setCurrentMessage:L,pastMessages:w,setPrivateMessages:Z,setPastMessages:E,setCurrentPublicMessage:z,setPastPublicMessages:X,setConversation:ae,setFilteredMessages:oe,loadData:Oe,password:m,setPassword:g})})]})},F=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,85)).then((function(t){var s=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;s(e),n(e),i(e),a(e),c(e)}))};c.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(P,{})}),document.getElementById("root")),F()}},[[84,1,2]]]);
//# sourceMappingURL=main.772db6fe.chunk.js.map